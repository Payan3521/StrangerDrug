<div class="main-layout">

  <header class="header-nav">
    <div class="nav-content-wrapper">
      <h1 class="logo">Stranger<span class="logo-accent">Drug</span></h1>

      <nav class="main-links">
        <a *ngIf="isAdmin" class="admin-link">Panel de administración</a>
        <a [routerLink]="['/notification']">Notificaciones</a>
        <a [routerLink]="['/library']">Biblioteca</a>
      </nav>

      <button *ngIf="!isLoggedIn" class="btn-iniciar-sesion" (click)="iniciarSesion()">
        Iniciar sesión
      </button>

      <button *ngIf="isLoggedIn" class="btn-cerrar-sesion" (click)="cerrarSesion()">
        Cerrar sesión
      </button>
    </div>
  </header>

  <main class="content">
    <div class="content-container">

      <h2 class="section-title">Videos exclusivos</h2>
      <p class="section-subtitle">Accede a contenido que no encontrarás en otro lugar</p>

      <section class="video-section">
        <div class="section-header-inline">
          <span class="highlight-pill">Videos recientes</span>
          <button class="btn-ver-todos" [routerLink]="['/video-gallery']">Ver todos</button>
        </div>

        <div class="grid-video-cards">
          <div class="video-card" *ngFor="let video of videosRecientes" [routerLink]="['/video', video.id]">
            <div class="video-placeholder" [style.background-image]="'url(' + video.thumbnailUrl + ')'"
              [style.background-size]="'cover'" [style.background-position]="'center'">
              <svg class="play-icon" viewBox="0 0 512 512" *ngIf="!video.thumbnailUrl">
                <path fill="currentColor"
                  d="M256 0c141.4 0 256 114.6 256 256S397.4 512 256 512 0 397.4 0 256 114.6 0 256 0zM192 376V136c0-13.3 10.7-24 24-24s24 10.7 24 24v240c0 13.3-10.7 24-24 24s-24-10.7-24-24zm144-88l80 48c6.9 4.1 15.5 4.1 22.4 0s11.5-12.7 11.5-20.7V176c0-8-4.6-16.6-11.5-20.7s-15.5-4.1-22.4 0l-80 48c-6.9 4.1-11.5 12.7-11.5 20.7v96c0 8 4.6 16.6 11.5 20.7z" />
              </svg>
            </div>
            <p class="card-title">{{ video.title }}</p>
            <p class="card-price">${{ video.precio.toFixed(2) }}</p>
            <p class="card-duration">Duración: {{ video.duracionFormatted }}</p>
          </div>
        </div>
      </section>

      <section class="models-section">
        <div class="section-header-inline">
          <span class="highlight-pill">Modelos destacadas</span>
          <button class="btn-ver-todos" [routerLink]="['/model-gallery']">Ver todas</button>
        </div>

        <div class="grid-model-cards">
          <div class="model-card" *ngFor="let modelo of modelosDestacados" [routerLink]="['/model', modelo.id]">
            <div class="model-placeholder" [style.background-image]="'url(' + modelo.profile.s3Url + ')'"
              [style.background-size]="'cover'" [style.background-position]="'center'"></div>
            <!-- <p class="model-videos">{{ modelo.videos }} Videos</p> -->
            <p class="model-name">{{ modelo.name }}</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <app-footer #footer></app-footer>

  <!-- Age Verification Modal -->
  <div class="age-modal-overlay" *ngIf="showAgeModal">
    <div class="age-modal-content">
      <div class="age-warning-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="64" height="64">
          <path fill="#f700ff"
            d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z" />
        </svg>
      </div>
      <h2 class="age-title">ADVERTENCIA DE CONTENIDO</h2>
      <p class="age-text">Este sitio web contiene material con restricciones de edad, incluyendo desnudez y
        representaciones explícitas de actividad sexual.</p>
      <p class="age-text">Al entrar, afirmas que tienes al menos <strong>18 años</strong> de edad o la mayoría de edad
        en la jurisdicción desde la que accedes al sitio.</p>

      <div class="age-legal-links">
        <span (click)="footer.openLegalModal('terms')">Términos y Condiciones</span> |
        <span (click)="footer.openLegalModal('privacy')">Política de Privacidad</span>
      </div>

      <p class="age-disclaimer">Los padres deben utilizar controles parentales para bloquear el acceso a este sitio si
        lo consideran inapropiado para sus hijos.</p>

      <div class="age-buttons">
        <button class="btn-age-confirm" (click)="confirmAge()">ENTRAR (Soy mayor de 18)</button>
        <button class="btn-age-deny" (click)="denyAge()">SALIR</button>
      </div>
    </div>
  </div>

  <!-- Access Denied View -->
  <div class="access-denied-overlay" *ngIf="accessDenied">
    <div class="denied-content">
      <h1>Acceso Denegado</h1>
      <p>No puedes acceder a este sitio si eres menor de edad.</p>
      <a href="https://www.google.com" class="btn-exit">Ir a Google</a>
    </div>
  </div>

</div>