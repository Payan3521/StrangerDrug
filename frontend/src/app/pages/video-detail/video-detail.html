<div class="video-detail-layout">

  <header class="detail-header">
    <div class="nav-wrapper">
      <h1 class="logo">Stranger<span class="logo-accent">Drug</span></h1>
      <button class="btn-volver" [routerLink]="['/home']">Volver</button>
    </div>
  </header>

  <main class="content-wrapper">
    <div class="video-player-section">
      <h2 class="video-title">{{ tituloVideo }}</h2>

      <div class="player-container">
        <video [src]="videoSourceUrl" controls class="video-player" (ended)="manejarFinPreview()" [autoplay]="true">
          Tu navegador no soporta el tag de video.
        </video>

        <div class="lock-overlay" *ngIf="isPreview && !isPurchased">
          <span class="lock-icon">ðŸ”’</span>
        </div>
      </div>

    </div>

    <div class="info-and-purchase-grid">

      <div class="info-panel">
        <h3 class="panel-title">InformaciÃ³n del video</h3>
        <p class="panel-description">{{ descripcionVideo }}</p>

        <div class="info-details">
          <p><strong>DuraciÃ³n:</strong> {{ duracionVideo }}</p>
          <p>
            <strong>Modelos:</strong>
            <span *ngFor="let modelo of modelosRelacionados; let last = last">
              <a [routerLink]="['/modelo', modelo.id]" class="model-link">{{ modelo.nombre }}</a>{{ !last ? ', ' : '' }}
            </span>
          </p>

          <p *ngIf="categoriaVideo"><strong>CategorÃ­a:</strong> {{ categoriaVideo }}</p>

          <p><strong>Publicado:</strong> {{ fechaPublicacion }}</p>
        </div>
      </div>

      <div class="purchase-panel" *ngIf="!isPurchased">
        <h3 class="panel-title">Precio</h3>

        <label for="country-select">Selecciona tu paÃ­s</label>
        <select id="country-select" class="country-select" [(ngModel)]="paisSeleccionado" (change)="onPaisChange()">
          <option *ngFor="let pais of paises" [value]="pais">{{ pais }}</option>
        </select>

        <div class="price-display">
          <p class="price-currency">{{ precioActual.moneda }}</p>
          <p class="price-amount">{{ precioActual.precio | number: '1.2-2' }}</p>
        </div>

        <p class="access-note">Compra Ãºnica - Acceso ilimitado</p>

        <button class="btn-comprar" (click)="iniciarCompra()">
          ðŸ›’ Comprar
        </button>
      </div>

    </div>
  </main>

  <app-footer></app-footer>
</div>